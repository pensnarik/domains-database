create or replace
function public.add_domains
(
  adomains           text[],
  afrom_site_task_id integer default null::integer
) returns integer as $$
declare
  vcount integer := 0;
begin
  select sum(public.add_domain(domain, afrom_site_task_id))
    into vcount
    from unnest(adomains) domain;

  return vcount;
end;
$$ language plpgsql security definer;

comment on function public.add_domains(text[], integer) is 'Добавляет новые домены, возвращает количетсво новых доменов';
